# 無料鑑定受付サイト

公式LINEから誘導する「無料鑑定受付フォーム」の静的サイトです。  
GitHub Pages で公開でき、送信データは Google スプレッドシートに自動蓄積されます。

---

## 📁 ファイル構成

```
無料鑑定サイト/
├── index.html       ← 鑑定申し込みフォーム（メインページ）
├── thanks.html      ← 送信完了ページ
├── css/
│   └── style.css    ← デザイン（色・フォント等はここで一括変更）
├── js/
│   └── form.js      ← フォーム送信処理（送信先もここで管理）
├── gas/
│   └── Code.gs      ← Google Apps Script（コピペ用・サイトには含めない）
└── README.md        ← このファイル
```

---

## 🚀 セットアップ手順

### ステップ1：Google スプレッドシートの準備

1. [Google ドライブ](https://drive.google.com) にアクセス
2. **「新規」→「Google スプレッドシート」** で新しいシートを作成
3. シート名を「鑑定受付データ」などに変更（任意）
4. そのシートを開いたまま、次のステップへ

### ステップ2：Google Apps Script の設定

1. スプレッドシートのメニューから **「拡張機能」→「Apps Script」** をクリック
2. エディタが開いたら、最初から入っているコードを **すべて削除**
3. `gas/Code.gs` の中身を **すべてコピーして貼り付け**
4. 左上の「無題のプロジェクト」をクリックして、名前を「鑑定受付API」に変更
5. **💾 保存ボタン（Ctrl+S）** を押す

### ステップ3：Apps Script のデプロイ

1. 右上の **「デプロイ」→「新しいデプロイ」** をクリック
2. 左上の⚙️歯車アイコンをクリック → **「ウェブアプリ」** を選択
3. 以下のように設定：
   - **説明**: 鑑定受付フォーム（任意）
   - **次のユーザーとして実行**: **自分**
   - **アクセスできるユーザー**: **全員**
4. **「デプロイ」** をクリック
5. **「アクセスを承認」** をクリック（初回のみ）
   - Googleアカウントを選択
   - 「詳細」→「〇〇（安全ではないページ）に移動」をクリック
   - 「許可」をクリック
6. 表示される **URL をコピー** する（`https://script.google.com/macros/s/...` という形式）

> ⚠️ **重要**: この承認画面は初回デプロイ時のみ表示されます。Googleの正常な動作です。

### ステップ4：フォームにURLを設定

1. `js/form.js` をテキストエディタで開く
2. 以下の部分を見つける：
   ```javascript
   endpoint: 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE',
   ```
3. `YOUR_GOOGLE_APPS_SCRIPT_URL_HERE` を、ステップ3でコピーしたURLに置き換える：
   ```javascript
   endpoint: 'https://script.google.com/macros/s/あなたのID/exec',
   ```
4. 保存する

### ステップ5：動作確認（ローカル）

1. `index.html` をダブルクリックしてブラウザで開く
2. フォームに適当なデータを入力して送信
3. Google スプレッドシートにデータが追加されていることを確認
4. `thanks.html`（送信完了ページ）に遷移することを確認

---

## 🌐 GitHub Pages で公開する方法

### 初回のみ

1. [GitHub](https://github.com) にアクセスしてログイン
2. **「New repository」** で新しいリポジトリを作成
   - リポジトリ名: `kantei-form` など
   - **Public** を選択
3. 作成されたリポジトリのページを開く

### ファイルのアップロード

1. リポジトリのページで **「Add file」→「Upload files」** をクリック
2. 以下のファイルを **ドラッグ＆ドロップ** でアップロード：
   - `index.html`
   - `thanks.html`
   - `css/` フォルダ
   - `js/` フォルダ
   
   > ⚠️ `gas/` フォルダと `README.md` はアップロード不要（アップロードしても問題はありません）

3. **「Commit changes」** をクリック

### GitHub Pages の有効化

1. リポジトリの **「Settings」** タブを開く
2. 左メニューの **「Pages」** をクリック
3. **Source** を **「Deploy from a branch」** に設定
4. **Branch** を **「main」**、フォルダを **「/ (root)」** に設定
5. **「Save」** をクリック
6. 数分後、`https://あなたのユーザー名.github.io/kantei-form/` でアクセス可能に

---

## 🎨 カスタマイズ

### サービス名を変更したい

`index.html` と `thanks.html` の以下の箇所を変更：

```html
<h1 class="site-title">魂の鑑定室</h1>    ← ここを変更
<p class="site-subtitle">― 無料鑑定受付 ―</p>  ← ここも
```

### 色を変更したい

`css/style.css` の先頭にある CSS変数を変更：

```css
:root {
  --bg-primary: #0d0d1a;       /* メイン背景色 */
  --text-gold: #c9a84c;        /* 金色（アクセント） */
  --accent-gold: #c9a84c;      /* ボタンの色 */
  /* ... 他の色もここで変更可能 */
}
```

### フッターの年号を変更したい

`index.html` と `thanks.html` の最下部：

```html
&copy; 2025 魂の鑑定室   ← 年号やサービス名を変更
```

---

## 🔒 セキュリティについて

| 項目 | 対策 |
|------|------|
| 通信の暗号化 | GitHub Pages は HTTPS を標準サポート |
| スパム対策 | ハニーポットフィールド（非表示のダミー入力欄） |
| データ保存場所 | あなたの Google アカウント内のスプレッドシート |
| 第三者からのアクセス | スプレッドシートの共有設定をしない限り非公開 |
| フォームデータ | サイト上には一切保存されない（送信のみ） |

---

## 🔮 将来の拡張メモ

### Supabase / Firebase への移行

現在の構成は、将来的にデータベースへ移行しやすい設計になっています。

**変更が必要なファイル**: `js/form.js` のみ

```javascript
// 現在（Google Apps Script）
const FORM_CONFIG = {
  endpoint: 'https://script.google.com/macros/s/.../exec',
};

// ↓ Supabase に変更する場合
const FORM_CONFIG = {
  endpoint: 'https://xxxxx.supabase.co/rest/v1/appraisals',
  apiKey: 'your-supabase-anon-key',
};
```

### 拡張アイデア

- 🔔 **LINE通知連携**: 新しい申し込みがあったらLINEに自動通知
- 📊 **管理画面**: 鑑定の進捗を管理するダッシュボード
- 📎 **ファイル添付**: 手相の写真をアップロードできる機能
- 🔐 **認証**: 鑑定結果をパスワードで閲覧できるページ
- 📧 **自動返信**: 申し込み確認メールの自動送信

---

## ⚠️ 注意事項

1. **Apps Script のURL は秘密にしてください**  
   URLを知っている人なら誰でもデータを送信できます。ただし、スプレッドシートの中身が見られるわけではありません。

2. **スプレッドシートの共有設定に注意**  
   スプレッドシートを「リンクを知っている全員が閲覧可能」にしないでください。個人情報が含まれます。

3. **Apps Script の無料枠**  
   Google Apps Script は1日あたり約20,000回のリクエストに対応可能です。個人の鑑定受付なら十分です。

4. **デプロイの更新**  
   `Code.gs` を変更した場合は、Apps Script で再度「デプロイ」→「デプロイを管理」→「新しいバージョン」として再デプロイしてください。
